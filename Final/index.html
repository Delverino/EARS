<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta keyword="Virtual Pet, Frog, Would You Rather, Game">
        <title>Would You Rather | Virtual Frog</title>
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="images/icon.png" type="image/png">
        <style>
            .center { text-align: center; }
            .button{
                background: white;
                font-size: 30px;
                border-radius: 20px;
                border: solid 3px black;
                padding: 10px;
                text-align: center;
                margin: 20px;
            }
        </style>
    </head>



    <body>
        <ul>
            <li><a href="contact.html">Contact Us</a></li>
        </ul>
        
        <div>
            <!-- TODO: fill in the action URL -->
            <form class="center" id="form" name="choice" action=".php" method="POST">
                <input type="button" class="button" id="left" value="First Option!">
                <input type="button" class="button" id="right" value="Second Option!">
                <p display="none"><input type="text"  name='option' id="choice" style="display:none;"/></p>
            </form>
        </div>


        <footer>
               <p>
                Â© EARS
               </p> 
        </footer>

        <script language = "javascript">
            first = document.getElementById("left");
            first.onclick = function() { submit("left"); };
            second = document.getElementById("right");
            second.onclick = function() { submit("right"); };
            
            function submit(option)
            {
                document.getElementById("choice").innerHTML = option;
                document.getElementById("form").submit();
                
                ajaxCall(/*TODO: NEED CALL URL HERE*/);
                fetchCall(/*TODO: NEED CALL URL HERE*/);
            }
            
            function ajaxCall(type)
            {
                xhr = new XMLHttpRequest();
                if (!xhr) {
                    alert("Unable to create HTTPRequest object");
                    return;
                }
                xhr.open("GET", type, true);
                xhr.onload = function () {
                    if (this.status === 200) {
                        // Changing string data into JSON Object
                        obj = JSON.parse(this.responseText);
                        
                        bubble = document.getElementById("speech-bubble");
                        bubble.innerHTML = obj.question;
                        //TODO: not actually sure if this part works cause IDK what the API returns
                    }
                    else {
                        console.log("File not found");
                    }
                }
                xhr.send();
            }
            
            function fetchCall(type)
            {
                fetch(type)
                .then ((response) => { return response.json(); })
                .then ((data) => {
                    // obj = JSON.parse(data);
                    obj = data;
                    bubble = document.getElementById("speech-bubble");
                    bubble.innerHTML = obj.question;
                    //TODO: not actually sure if this part works cause IDK what the API returns
                })
                .catch (error => console.log(error))
            }
        </script>
    </body>
 </html>